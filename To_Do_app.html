<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        .task-completed {
            opacity: 0.6;
            text-decoration: line-through;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">ðŸ“‹ Task Manager Pro</h1>
            <p class="text-gray-600">Organize your tasks efficiently with lists, dates, and priorities</p>
        </div>

        <!-- Create New List -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Create New List</h2>
            <div class="flex gap-3">
                <input type="text" id="newListName" placeholder="Enter list name..."
                    class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <button onclick="createList()"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium transition-colors">
                    Create List
                </button>
            </div>
        </div>

        <!-- Lists Container -->
        <div id="listsContainer" class="space-y-6">
            <!-- Default list will be created here -->
        </div>
    </div>

    <!-- Edit Task Modal -->
    <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-lg font-semibold mb-4">Edit Task</h3>
            <input type="text" id="editTaskText"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg mb-3 focus:ring-2 focus:ring-blue-500">
            <input type="datetime-local" id="editTaskDateTime"
                class="w-full px-3 py-2 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-blue-500">
            <div class="flex gap-3">
                <button onclick="saveTaskEdit()"
                    class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-medium">Save</button>
                <button onclick="closeEditModal()"
                    class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 rounded-lg font-medium">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        let lists = [];
        let currentEditingTask = null;

        // Initialize with a default list
        function init() {
            createList('My Tasks', true);
        }

        function createList(name = null, isDefault = false) {
            const listName = name || document.getElementById('newListName').value.trim();
            if (!listName) {
                alert('Please enter a list name');
                return;
            }

            const listId = 'list_' + Date.now();
            const newList = {
                id: listId,
                name: listName,
                tasks: []
            };

            lists.push(newList);
            renderList(newList);

            if (!isDefault) {
                document.getElementById('newListName').value = '';
            }
        }

        function renderList(list) {
            const listsContainer = document.getElementById('listsContainer');

            const listElement = document.createElement('div');
            listElement.className = 'bg-white rounded-xl shadow-lg p-6 fade-in';
            listElement.id = list.id;

            listElement.innerHTML = `
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-800">${list.name}</h2>
                    <button onclick="deleteList('${list.id}')" class="text-red-500 hover:text-red-700 text-sm font-medium">
                        Delete List
                    </button>
                </div>
                
                <!-- Add Task Form -->
                <div class="bg-gray-50 rounded-lg p-4 mb-4">
                    <div class="flex flex-col sm:flex-row gap-3">
                        <input type="text" id="taskInput_${list.id}" placeholder="Enter new task..." 
                               class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <input type="datetime-local" id="taskDateTime_${list.id}" 
                               class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <button onclick="addTask('${list.id}')" 
                                class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium whitespace-nowrap">
                            Add Task
                        </button>
                    </div>
                </div>
                
                <!-- Tasks List -->
                <div id="tasksList_${list.id}" class="space-y-2">
                    <!-- Tasks will be rendered here -->
                </div>
                
                <!-- Task Counter -->
                <div class="mt-4 text-sm text-gray-500 text-center">
                    <span id="taskCount_${list.id}">0 tasks</span>
                </div>
            `;

            listsContainer.appendChild(listElement);
            updateTaskCount(list.id);
        }

        function addTask(listId) {
            const taskInput = document.getElementById(`taskInput_${listId}`);
            const taskDateTime = document.getElementById(`taskDateTime_${listId}`);
            const taskText = taskInput.value.trim();

            if (!taskText) {
                alert('Please enter a task');
                return;
            }

            const list = lists.find(l => l.id === listId);
            const taskId = 'task_' + Date.now();

            const newTask = {
                id: taskId,
                text: taskText,
                completed: false,
                dateTime: taskDateTime.value,
                createdAt: new Date().toISOString()
            };

            list.tasks.push(newTask);
            renderTask(listId, newTask);

            taskInput.value = '';
            taskDateTime.value = '';
            updateTaskCount(listId);
        }

        function renderTask(listId, task) {
            const tasksList = document.getElementById(`tasksList_${listId}`);

            const taskElement = document.createElement('div');
            taskElement.className = `flex items-center gap-3 p-3 bg-gray-50 rounded-lg fade-in ${task.completed ? 'task-completed' : ''}`;
            taskElement.id = task.id;

            const dateTimeDisplay = task.dateTime ?
                `<span class="text-xs text-gray-500">ðŸ“… ${new Date(task.dateTime).toLocaleString()}</span>` : '';

            taskElement.innerHTML = `
                <input type="checkbox" ${task.completed ? 'checked' : ''} 
                       onchange="toggleTask('${listId}', '${task.id}')"
                       class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500">
                <div class="flex-1">
                    <div class="font-medium text-gray-800">${task.text}</div>
                    ${dateTimeDisplay}
                </div>
                <button onclick="editTask('${listId}', '${task.id}')" 
                        class="text-blue-600 hover:text-blue-800 text-sm font-medium">Edit</button>
                <button onclick="deleteTask('${listId}', '${task.id}')" 
                        class="text-red-500 hover:text-red-700 text-sm font-medium">Delete</button>
            `;

            tasksList.appendChild(taskElement);
        }

        function toggleTask(listId, taskId) {
            const list = lists.find(l => l.id === listId);
            const task = list.tasks.find(t => t.id === taskId);
            task.completed = !task.completed;

            const taskElement = document.getElementById(taskId);
            if (task.completed) {
                taskElement.classList.add('task-completed');
            } else {
                taskElement.classList.remove('task-completed');
            }

            updateTaskCount(listId);
        }

        function editTask(listId, taskId) {
            const list = lists.find(l => l.id === listId);
            const task = list.tasks.find(t => t.id === taskId);

            currentEditingTask = { listId, taskId };
            document.getElementById('editTaskText').value = task.text;
            document.getElementById('editTaskDateTime').value = task.dateTime || '';
            document.getElementById('editModal').classList.remove('hidden');
            document.getElementById('editModal').classList.add('flex');
        }

        function saveTaskEdit() {
            if (!currentEditingTask) return;

            const { listId, taskId } = currentEditingTask;
            const list = lists.find(l => l.id === listId);
            const task = list.tasks.find(t => t.id === taskId);

            const newText = document.getElementById('editTaskText').value.trim();
            const newDateTime = document.getElementById('editTaskDateTime').value;

            if (!newText) {
                alert('Task text cannot be empty');
                return;
            }

            task.text = newText;
            task.dateTime = newDateTime;

            // Re-render the task
            const taskElement = document.getElementById(taskId);
            taskElement.remove();
            renderTask(listId, task);

            closeEditModal();
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.add('hidden');
            document.getElementById('editModal').classList.remove('flex');
            currentEditingTask = null;
        }

        function deleteTask(listId, taskId) {
            if (confirm('Are you sure you want to delete this task?')) {
                const list = lists.find(l => l.id === listId);
                list.tasks = list.tasks.filter(t => t.id !== taskId);
                document.getElementById(taskId).remove();
                updateTaskCount(listId);
            }
        }

        function deleteList(listId) {
            if (confirm('Are you sure you want to delete this entire list?')) {
                lists = lists.filter(l => l.id !== listId);
                document.getElementById(listId).remove();
            }
        }

        function updateTaskCount(listId) {
            const list = lists.find(l => l.id === listId);
            const totalTasks = list.tasks.length;
            const completedTasks = list.tasks.filter(t => t.completed).length;

            const countElement = document.getElementById(`taskCount_${listId}`);
            countElement.textContent = `${totalTasks} tasks (${completedTasks} completed)`;
        }

        // Handle Enter key for inputs
        document.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                if (e.target.id === 'newListName') {
                    createList();
                } else if (e.target.id.startsWith('taskInput_')) {
                    const listId = e.target.id.replace('taskInput_', '');
                    addTask(listId);
                } else if (e.target.id === 'editTaskText') {
                    saveTaskEdit();
                }
            }
        });

        // Initialize the app
        init();
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'97a3c45663fd851f',t:'MTc1NzA1NDc1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>